COMMUNICATION PROTOCOLS

_Abstract_

            Serial communication protocols refer to the set of defined rules that direct the communication of data between two or more systems.

Communication can be broadly classified as serial and parallel communication.

_Serial communication:_ In case of serial communication, data is transmitted 1 bit at a time, over the data bus

_Parallel communication:_ In case of parallel communication, multiple bits are transmitted simultaneously across the data bus

With reference to the above types of data communication, the communication protocols are also classified as serial communication protocols (e.g. CAN, ETHERNET, I2C, SPI, RS232, USB, 1-Wire, and SATA etc.)  and parallel communication protocols (e.g. ISA, ATA).

_Introduction to Transmission modes and Clock Synchronization_

**_Transmission Modes_**

There are 3 types of transmission modes in case of serial communication:

1)    Simplex Mode: Here only one of the two systems (sender/ receiver) can be active and transmit data. It is a one-way communication mode

A classic example would be the TV and Radio systems.

2)    Half Duplex mode: In this method, both the sender and receiver can be active at the same time, however only one can transmit data.

E.g. server to PC communication. In this scenario, both the PC and the server can communicate to each other. However, when the server is transmitting data, the PC has to be on hold and vice versa

3)    Full Duplex Mode: In this method, both the systems can be active and transmit data at a time. A very common example will be the communication between two mobile phones

**_Clocks Synchronization:_**

In digital electronics, a clock refers to a signal that oscillates between two voltage levels at a regular interval, typically generating square wave pulses. This signal acts as a timing reference for synchronizing various operations within digital circuits.

In case of Serial communication, Clocks can be classified as **Synchronous Serial Interface** and **Asynchronous Serial Interface.**

·       **Synchronous Serial Interface:**

In case of the SSI, all the devices use one common clock pulse to transmit and receive data. On the transmission end, the data bits are arranged on the serial line and the data is transmitted one bit at a time for each clock cycle.

Likewise, on the receiving end, the receiver converts the data back to the parallel form at each clock cycle. In case of SSI, it is important to match the baud rates at both the end (E.g. I2C)

·       **Asynchronous Serial Interface:**

In case of ASI, there is no common external clock for the receiving and transmitting end. It also depends on control parameters such as the parity bit, start and stop bits. On the transmitting end, the data is arranged on the serial line and the control bits (start, stop bit) and the parity bit is added. The transmitting end, uses its own clock to transmit data, serially, while the receiving end uses a separate clock to receive the data and strips of the control bits, finally retrieving the data in its parallel form (E.g. RS232)

![](file:///C:/Users/91991/AppData/Local/Temp/msohtmlclip1/01/clip_image002.gif)![](file:///C:/Users/91991/AppData/Local/Temp/msohtmlclip1/01/clip_image004.gif)

_Serial communication protocols:_

1)    **SPI:** SPI, or Serial Peripheral Interface, is a synchronous serial communication interface used for short-distance communication primarily between microcontrollers, sensors, and peripheral devices within embedded systems. It is a full-duplex, synchronous communication protocol, meaning data can be transferred in both directions simultaneously, and it relies on a shared clock signal for synchronization.

1.    **Master-Slave Configuration**: SPI typically involves one master device (e.g., microcontroller) communicating with one or more slave devices (e.g., sensors, memory chips).

2.    **Wiring**: SPI requires four signal lines:

·        MISO (Master Input Slave Out): Used for data transmission from the slave(s) to the master.

·        MOSI (Master Out Slave In): Used for data transmission from the master to the slave(s).

·        SCK (Serial Clock): Clock signal generated by the master to synchronize data transfer.

·        SS (Slave Select) or chip select: Used by the master to select a specific slave device for communication.

3.    **Data Transfer**: Communication typically occurs as full-duplex data transfer, where both the master and slave(s) can remain active and send and receive data simultaneously. Each transfer is synchronized to the rising or falling edge of the clock signal.

4.    **Slave Select**: Before communicating with a particular slave device, the master pulls the corresponding SS line low to select that slave. This indicates to the selected slave that it should pay attention to incoming data.

5.    **Clock Polarity and Phase**: SPI allows configuration of clock polarity (CPOL) and clock phase (CPHA) to accommodate different devices' requirements. These settings determine the clock signal's idle state and when data is sampled and shifted.

6.    **Speed**: SPI supports various clock speeds depending on the devices involved. The clock speed is often adjustable and can range from a few kHz to several MHz.

SPI communication offers advantages like simplicity, high speed, and full-duplex operation. However, its generally limited to short distances due to its synchronous nature and susceptibility to noise.

![](file:///C:/Users/91991/AppData/Local/Temp/msohtmlclip1/01/clip_image006.gif)

2)    I2C:

![](file:///C:/Users/91991/AppData/Local/Temp/msohtmlclip1/01/clip_image008.gif)

**_I2C, which stands for Inter-Integrated Circuit_**, is a synchronous, multi-master, multi-slave, packet-switched protocol, allowing multiple devices to communicate with each other over a shared bus.

**_Master-Slave Configuration_**: Like SPI, I2C also involves one or more master devices and one or more slave devices. However, in I2C, multiple masters can exist on the same bus, although collisions between masters need to be managed.

**_Two-Wire Interface:_** I2C uses two bidirectional lines:

SDA (Serial Data Line): Used for bidirectional data transfer between the master and slave(s).

SCL (Serial Clock Line): Used to synchronize data transfer between the master and slave(s). The clock signal is generated by the master device.

**_Pull-up Resistors:_** Both SDA and SCL lines are pulled up to a positive voltage level (typically Vcc) through resistors. This allows the lines to remain high when not in use, and devices can pull the lines low to transmit data.

**_Addressing:_** Each slave device connected to the I2C bus has a unique address, allowing the master device to communicate with specific slaves. Standard I2C addresses are 7 bits long, although a 10-bit addressing mode is also available for addressing a larger number of devices.

**_Data Transfer:_** Communication on the I2C bus typically occurs in the form of data frames. The master device initiates communication by sending a start condition followed by the address of the slave it wishes to communicate with. After addressing, data is transmitted or received in byte-by-byte fashion, synchronized to the clock signal.

**_Start and Stop Conditions:_** Communication on the I2C bus begins with a start condition (SDA transitions from high to low while SCL remains high) and ends with a stop condition (SDA transitions from low to high while SCL remains high).

**_Speed_**: I2C supports different transmission speeds. (~400Kbps)

I2Cs multi-master capability allows for more complex network topologies.

![](file:///C:/Users/91991/AppData/Local/Temp/msohtmlclip1/01/clip_image010.gif)

3)    USB:  also known as Universal serial bus is a protocol that is widely used with various speeds. A maximum of 127 peripherals can be connected using the USB host. It uses differential transmission technique, where the  transmission cable has 2 lines, one carries the transmitted data while the other caries it complement, in this way the average voltage is almost 0. In this way signal interference is reduced

4)    CAN: The CAN protocol, short for Controller Area Network, is a widely used serial communication protocol in the automotive industry

**_Message-Based Communication:_** CAN is a message-based protocol, where data is transmitted in the form of messages or frames. Each frame contains an identifier, data, and control bits.

**_Two-Wire Bus:_** CAN uses a differential two-wire bus for communication:

CAN High (CANH)

CAN Low (CANL)

These wires are twisted together to reduce electromagnetic interference (EMI) and provide noise immunity.

**_Message Arbitration_**: CAN uses a non-destructive bitwise arbitration mechanism to determine message priority. When multiple nodes attempt to transmit messages simultaneously, the node with the highest-priority message (determined by its identifier) gains bus access and transmits its message.

**_Message Format:_**

Identifier: Each message contains a unique identifier, which determines its priority on the bus.

Data: The payload of the message, typically ranging from 0 to 8 bytes.

Control Bits: Includes bits for error detection and control.

**_Flexible Data Rates:_** CAN supports flexible data rates, allowing communication speeds ranging from a few kilobits per second (Kbps) to several megabits per second (Mbps). Different CAN variants, such as CAN 2.0A, CAN 2.0B, and CAN FD (Flexible Data Rate), offer varying data rate capabilities.

CAN has been widely used in-vehicle networking due to its robustness, reliability, and real-time capabilities.

5)    UART:  which stands for Universal Asynchronous Receiver/Transmitter

**_Transmitter (Tx) and Receiver (Rx):_** UART communication involves two pins, typically labelled Tx and Rx-

_Tx (Transmitter):_ Sends serial data from the microcontroller to another device.

Rx (Receiver): Receives serial data from another device and passes it to the microcontroller.

**_Asynchronous Communication:_** UART is asynchronous, meaning that the transmitter and receiver do not share a common clock signal. Instead, both devices must have on a common baud rate (bits per second) for proper communication. The baud rate determines the speed at which data is transmitted and received.

**_Start and Stop Bits:_** Each data frame in UART communication typically consists of a start bit, followed by a fixed number of data bits (usually 8 bits), and one or more stop bits. The start bit indicates the beginning of a data frame, while the stop bit(s) provide synchronization and signal the end of the frame.

**_Data Framing:_** UART communication doesn't include any mechanism for addressing or error detection. It relies on the start and stop bits to frame each data byte.

**_Full-Duplex Communication:_** UART communication is full-duplex, meaning that data can be transmitted and received simultaneously. However, separate Tx and Rx lines are required for each direction of communication.

**_Configurable Parameters:_** In addition to the baud rate, UART communication can be configured with parameters such as the number of data bits (usually 7 or 8), parity (optional error-checking mechanism), and number of stop bits.

While UART lacks some of the advanced features found in protocols like SPI and I2C, its simplicity and widespread support make it a popular choice for many serial communication applications.